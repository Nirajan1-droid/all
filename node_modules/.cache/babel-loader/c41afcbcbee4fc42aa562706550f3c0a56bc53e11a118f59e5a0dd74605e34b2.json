{"ast":null,"code":"import _regeneratorRuntime from\"/home/nirajan/withcart/march7build/Unicorn-Classic/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/nirajan/withcart/march7build/Unicorn-Classic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/nirajan/withcart/march7build/Unicorn-Classic/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import\"./style.css\";import\"./mobile.css\";import Navbar from'../common/navbar';import Footer from'../common/footer';import{HashLink as Link}from'react-router-hash-link';import{useContext}from\"react\";import{Context}from\"../context/Context\";import axios from'axios';import LogoutButton from'./logout';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(){var userRef=useRef();var passwordRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),servererr=_useState4[0],setServererr=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useContext=useContext(Context),user=_useContext.user,dispatch=_useContext.dispatch,isFetching=_useContext.isFetching;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"LOGIN_START\"});_context.next=4;return axios.post(\"/api/v1/login\",{email:userRef.current.value,password:passwordRef.current.value}).then(function(res){res.data&&window.location.replace('/order_page')&&setSuccess(true);dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});alert(\"LOGIN Success\");setError(false);setServererr(false);}).catch(function(err){alert(\"login error\");dispatch({type:\"LOGIN_FAILURE\"});if(err.code===401||err.code===403||err.code===404){setError(true);}else{//for 500 which is internal server error\nsetServererr(true);setSuccess(false);}});case 4:res=_context.sent;case 5:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"login__id\",className:\"login__page--container\",children:[/*#__PURE__*/_jsx(Navbar,{}),user?/*#__PURE__*/_jsxs(\"div\",{className:\"logout-button-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"success-message \",children:\"Successfully logged in!\"}),/*#__PURE__*/_jsx(LogoutButton,{})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"login__page--box flex__col flex__center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__page--greet medium__paragraph--text\",children:\"Greeting! Sign in to your Account\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"login__page--form flex__col flex__center\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"login__email--container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"login__identifier\",ref:userRef,placeholder:\"Email or Phone Number\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"login__pw--container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"login__pw\",ref:passwordRef,placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"login__btn--submit\",type:\"submit\",disabled:isFetching,children:\"LOGIN\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login__page--line\"}),error&&/*#__PURE__*/_jsx(\"span\",{className:\"warn\",style:{color:\"red\",marginTop:\"10px\"},children:\"Invalid Credentials\"}),servererr&&/*#__PURE__*/_jsx(\"span\",{className:\"warn\",style:{color:\"red\",marginTop:\"15px\"},children:\"Invalid\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__page--signup--redirect flex__col flex__center medium__paragraph--text\",children:[\"Don't have an account?\",/*#__PURE__*/_jsx(\"span\",{className:\"signup__redirect\",children:/*#__PURE__*/_jsx(Link,{to:\"/signin_page#signup__id\",className:\"linker nav__item--g\",children:/*#__PURE__*/_jsx(\"button\",{className:\"login__signup--btn\",children:\"SIGNUP\"})})})]})]}),\";\"]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","Navbar","Footer","HashLink","Link","useContext","Context","axios","LogoutButton","LoginPage","userRef","passwordRef","error","setError","servererr","setServererr","success","setSuccess","user","dispatch","isFetching","handleSubmit","e","preventDefault","type","post","email","current","value","password","then","res","data","window","location","replace","payload","alert","catch","err","code","color","marginTop"],"sources":["/home/nirajan/withcart/march7build/Unicorn-Classic/src/components/login_page/index.jsx"],"sourcesContent":["import React, { useEffect ,useRef, useState} from 'react'\nimport \"./style.css\"\nimport \"./mobile.css\"\nimport Navbar from '../common/navbar';\nimport Footer from '../common/footer';\nimport { HashLink as Link } from 'react-router-hash-link';\nimport {useContext} from \"react\";\nimport {Context} from \"../context/Context\";\nimport axios from 'axios';\nimport LogoutButton from './logout';\nexport default function LoginPage()\n{\n\t\n\t\t \n\t\t\t\n\tconst userRef = useRef();\n\tconst passwordRef = useRef();\n\tconst [error, setError ] = useState(false);\n\tconst [servererr,setServererr] =useState(false)\n\tconst [success,setSuccess] =useState(true)\n  \n\tconst {user , dispatch, isFetching } = useContext(Context);\n\t\n  \n  \n  \n\tconst handleSubmit= async (e)=>{\n\t  e.preventDefault();\n\t  dispatch({type:\"LOGIN_START\"});\n\t  \n\t\t  const res = await axios.post(\"/api/v1/login\",{\n\t\t\temail : userRef.current.value,\n\t\t\tpassword : passwordRef.current.value,\n\t\t  }).then((res) => {\n\t\t \n\t\t\t  res.data && (window.location.replace('/order_page') && setSuccess(true));\n\t\t\t  dispatch({type :\"LOGIN_SUCCESS\", payload:res.data});\n\t\t\talert(\"LOGIN Success\")\n\t\t\tsetError(false)\n\t\t\tsetServererr(false);\n\t\t\t \n\t\t}).catch((err)=>{ \nalert(\"login error\");\t\t\t\ndispatch({type:\"LOGIN_FAILURE\"})\n\t\t\tif (err.code === 401 || err.code === 403 || err.code === 404) {\nsetError(true);\t\t\t \n \n\t\t\t}else{//for 500 which is internal server error\n\t\t\t  setServererr(true);\n\t\t\t  setSuccess(false);\n\t\t\t}\n\t\t});\n\t\t \n\n\t}\n\treturn (\n\t\t<div id='login__id' className=\"login__page--container\">\n\t\t\n\t\t\t<Navbar/>\n\t\t\t {user ?\n\t\t\t \n\t\t\t \n\t\t\t\t(<div className=\"logout-button-container\">\n\t\t\t\t<div className=\"success-message \">Successfully logged in!</div>\n\t\t\t\t<LogoutButton/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t)\n\t\t\t\t\n\t\t\t \n\t\t\t:\n\t\t\t\t(<div className=\"login__page--box flex__col flex__center\">\n\t\t\t\t<div className=\"login__page--greet medium__paragraph--text\">Greeting! Sign in to your Account</div>\n\t\t\t\t<form className=\"login__page--form flex__col flex__center\" onSubmit={handleSubmit}>\n\t\t\t\t\t<div className=\"login__email--container\">\n\t\t\t\t\t\t<input type=\"text\" className='login__identifier' ref = {userRef} placeholder='Email or Phone Number' />\n\t\t\t\t\t\t{/* <div className=\"login__msg login__email--message\">Please enter a valid email</div> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"login__pw--container\">\n\t\t\t\t\t\t<input type=\"password\" className=\"login__pw\" ref = {passwordRef} placeholder='Password'/>\n\t\t\t\t\t\t{/* <div className=\n\t\t\t\t\t\t\"login__msg login__pw--message\">Please enter correct password</div> */}\n\t\t\t\t\t</div>\n\t\t\t\t\t \n\n\t\t\t\t\t<button className=\"login__btn--submit\" type=\"submit\" disabled ={isFetching} >LOGIN</button>\n\t\t\t\t\t \n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t<div className=\"login__page--line\"></div>\n\t\t\t\t\t\t\t{error && <span className=\"warn\" style={{ color: \"red\", marginTop: \"10px\" }}>Invalid Credentials</span>}\n\t\t\t\t\t\t\t{servererr && <span className=\"warn\" style={{ color: \"red\", marginTop: \"15px\" }}>Invalid</span>}\n\t\t\t\t\t<div className=\"login__page--signup--redirect flex__col flex__center medium__paragraph--text\">Don't have an account? \n\t\t\t\t\t\t<span className='signup__redirect'>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto={`/signin_page#signup__id`}\n\t\t\t\t\t\t\t\tclassName=\"linker nav__item--g\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button className=\"login__signup--btn\">SIGNUP</button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t</div>)};\n\t\t\t{/* <Footer/> */}\n\t\t\t\n\t\t</div>\n\t);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}